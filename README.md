# Визит

1. Указывается клиент для которого создается

3. Указывается периодичность:

Каждый день
Каждую неделю, с возможностью выбора дня недели
Каждые две недели, с возможностью выбора дня недели
Каждый месяц, с возможностью выбора дня месяца

4. Задается время в течение дня и продолжительность (не более суток)

5. Задается название

5. Задается количество работников (от 1 до 3)

6. Хранить стейт в виде эвентов

# Работник

1. Имя
2. Расписание
3. Стейт хранится как эвент сорсинг

## Назначение визита на работников

1. Идентификатор: айди визита + конкретный день (дата, месяц, год)
2. Задаются работники. (Не больше чем указано в Визите)
    Задается время визита и продолжительность (по-умолчанию из Визита, но можно кастомное)
4. Задается конкретная дата (день, месяц, год)
5. Нельзя создать назначение или поменять его, если день назначения (+ время начала) в прошлом

У работника не должно быть других визитов в это время в эту дату (разрулить сагой)

Это может быть один агрегат с несколькими работниками. И тогда инвариант с кол-вом работников разруливается внутри. Но тогда при изменении кол-ва работников в визите, нужна сага, которая поменяет кол-во работников во всех будущих назначениях (либо не поменяет, смотря как считать правило). Плюс подхода в том, что большая часть логики будет лежать в пердметном слое.

А еще это может быть агрегат с одним работником.



Допущения:

1. Создать attendance можно на любую дату, даже ту, которая не попадает в periodicity у визита. Можно, конечно, добавить сагу, которая будет удалять конфликты, но в этом нет смысла.
2. 